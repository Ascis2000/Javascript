<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tabla de Películas</title>

    <style>
    
    body {
        font-family: Arial, sans-serif;
        margin: 20px;
    }
    table {
        width: 100%;
        border-collapse: collapse;
        margin-bottom: 20px;
    }
    th, td {
        border: 1px solid #dddddd;
        text-align: left;
        padding: 8px;
    }
    th {
        background-color: #f2f2f2;
    }
    caption {
        caption-side: top;
        font-size: 1.5em;
        margin-bottom: 10px;
    }

    </style>

    <script>
    
    // Array general de peliculas
    const peliculas = [
        { 
            titulo: 'El Padrino', 
            data: { director: 'Francis Ford Coppola', anio: 1972 } 
        },
        { 
            titulo: 'La Lista de Schindler', 
            data: { director: 'Steven Spielberg', anio: 1993 } 
        },
        { 
            titulo: 'Pulp Fiction', 
            data: { director: 'Quentin Tarantino', anio: 1994 } 
        },
        { 
            titulo: 'El Caballero Oscuro', 
            data: { director: 'Christopher Nolan', anio: 2008 } 
        },
        { 
            titulo: 'Forrest Gump', 
            data: { director: 'Robert Zemeckis', anio: 1994 } 
        }
    ];

    function inicio(){
        pintarPeliculasHTML();
    }

    function pintarPeliculasHTML(){

        const tabla = document.getElementById('tblPeliculas');
        const tbody = tabla.querySelector('tbody');

        peliculas.forEach((p, index) => {

            const tr = document.createElement('tr');

            const tdIndex = document.createElement('td');
            tdIndex.textContent = index + 1;
            tr.appendChild(tdIndex);

            const tdTitulo = document.createElement('td');
            tdTitulo.textContent = p.titulo;
            tr.appendChild(tdTitulo);

            const tdDirector = document.createElement('td');
            tdDirector.textContent = p.data.director;
            tr.appendChild(tdDirector);

            const tdAnio = document.createElement('td');
            tdAnio.textContent = p.data.anio;
            tr.appendChild(tdAnio); 
            
            // Haciendo un clousure
            // Añadir evento click para cada celda usando closure
            tr.addEventListener('click', (function(tr) {
                return function(event) {
                    alert(event.target.textContent);
                };
            })
            (tr));

            tbody.appendChild(tr);
        });
    }
    
    // ejecutamos la funcion inicio cuando ya se ha cargado toda la página
    document.addEventListener('DOMContentLoaded', function() {
        inicio();
    });

    </script>
</head>

<body>

<table id="tblPeliculas">
<caption>Lista de Películas</caption>
<thead>
    <tr>
        <th>#</th>
        <th>Película</th>
        <th>Director</th>
        <th>Año</th>
    </tr>
</thead>

<tbody>
</tbody>
</table>

</body>
</html>
